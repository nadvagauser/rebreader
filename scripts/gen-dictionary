#!/bin/sh
# Written and tested on a stock Alpine 3.16
# Requirements:
# - jq

set -e pipefail

cat > ./src/dictionary.js << EOF
// This file is automatically generated by a pre-commit hook from data/services.json
// Take a look at scripts/gen-dictionary
export const base = $(jq -rMS --indent 2 . data/services.json | sed $'s/"/\'/g')

export const instances = $(jq -rMS --indent 2 . data/instances.auto.json | sed $'s/"/\'/g')

EOF

echo [scripts/gen-dictionary] generated src/dictionary.js
